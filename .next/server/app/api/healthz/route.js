"use strict";(()=>{var e={};e.id=579,e.ids=[579],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},4770:e=>{e.exports=require("crypto")},1728:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>S,patchFetch:()=>T,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>E,staticGenerationAsyncStorage:()=>l});var o={};r.r(o),r.d(o,{GET:()=>c});var s=r(9650),n=r(7088),a=r(2679),i=r(2606);async function c(){try{return console.log("DATABASE_URL set:",!!process.env.DATABASE_URL),console.log("Testing DB connection..."),await i.Z.get("health-check"),console.log("DB ok"),Response.json({ok:!0})}catch(e){return console.error("DB error:",e.message),Response.json({ok:!1},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/healthz/route",pathname:"/api/healthz",filename:"route",bundlePath:"app/api/healthz/route"},resolvedPagePath:"D:\\web\\webprac\\pastebin-lite-backend\\app\\api\\healthz\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:E}=p,S="/api/healthz/route";function T(){return(0,a.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:l})}},2606:(e,t,r)=>{let o;if(r.d(t,{Z:()=>s}),process.env.DATABASE_URL){let{Pool:e}=r(5900),t=new e({connectionString:process.env.DATABASE_URL,family:4});(async function(){await t.query("CREATE TABLE IF NOT EXISTS kv_store (k TEXT PRIMARY KEY, v JSONB)")})().catch(()=>{}),o={get:async e=>{let r=await t.query("SELECT v FROM kv_store WHERE k = $1",[e]);return 0===r.rowCount?null:r.rows[0].v},set:async(e,r)=>(await t.query("INSERT INTO kv_store (k, v) VALUES ($1, $2) ON CONFLICT (k) DO UPDATE SET v = EXCLUDED.v",[e,r]),!0)}}else if(process.env.UPSTASH_REDIS_REST_URL&&process.env.UPSTASH_REDIS_REST_TOKEN){let{Redis:e}=r(3262),t=new e({url:process.env.UPSTASH_REDIS_REST_URL,token:process.env.UPSTASH_REDIS_REST_TOKEN});o={get:e=>t.get(e),set:(e,r)=>t.set(e,r)}}else try{let e=r(2952);o=e.kv??e.default??e}catch(t){let e=new Map;o={get:async t=>{let r=e.get(t);return void 0===r?null:r},set:async(t,r)=>(e.set(t,r),!0)}}let s=o}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[520,572],()=>r(1728));module.exports=o})();